<?xml version="1.0"?>
<launch>
    <!-- Define the launch argument for the 'simu' flag -->
    <arg name="simu" default="OFF" /> <!-- Default value is Off -->

    <!-- Conditional argument for robot_IP selection based on the 'simu' flag -->
    <arg unless="$(eval simu=='ON')" name="robot_ip" default="192.168.131.17" />
    <arg if="$(eval simu=='ON')" name="robot_ip" default="127.0.0.1" />

    <group ns="ur5">
        <!-- Bring up the robot -->
        <include file="$(find ur_robot_driver)/launch/ur5_bringup.launch">
            <arg name="robot_ip" value="$(arg robot_ip)" />
        </include>

        <!-- Run the main Moveit! part -->
        <include file="$(find ur_moveit_config)/launch/moveit_planning_execution.launch" />

        <!-- Bring up the robot -->
        <include file="$(find ur_moveit_config)/launch/moveit_rviz.launch" />
    </group>
</launch>